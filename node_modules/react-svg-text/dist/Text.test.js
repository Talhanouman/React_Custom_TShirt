'use strict';

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _enzyme = require('enzyme');

var _Text = require('./Text');

var _Text2 = _interopRequireDefault(_Text);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

describe('<Text />', function () {
  it('Does not wrap long text if enough width', function () {
    var wrapper = (0, _enzyme.shallow)(_react2.default.createElement(
      _Text2.default,
      { width: 300, style: { fontFamily: 'Courier' } },
      'This is really long text'
    ));

    expect(wrapper.instance().state.wordsByLines.length).toEqual(1);
  });

  it('Wraps long text if not enough width', function () {
    var wrapper = (0, _enzyme.shallow)(_react2.default.createElement(
      _Text2.default,
      { width: 200, style: { fontFamily: 'Courier' } },
      'This is really long text'
    ));

    expect(wrapper.instance().state.wordsByLines.length).toEqual(2);
  });

  it('Wraps long text if styled but would have had enough room', function () {
    var wrapper = (0, _enzyme.shallow)(_react2.default.createElement(
      _Text2.default,
      { width: 300, style: { fontSize: '2em', fontFamily: 'Courier' } },
      'This is really long text'
    ));

    expect(wrapper.instance().state.wordsByLines.length).toEqual(2);
  });

  it('Does not perform word length calculation if width or scaleToFit props not set', function () {
    var wrapper = (0, _enzyme.shallow)(_react2.default.createElement(
      _Text2.default,
      null,
      'This is really long text'
    ));

    expect(wrapper.instance().state.wordsByLines.length).toEqual(1);
    expect(wrapper.instance().state.wordsByLines[0].width).toEqual(undefined);
  });

  it('Render 0 success when specify the width', function () {
    var wrapper = (0, _enzyme.render)(_react2.default.createElement(
      _Text2.default,
      { x: 0, y: 0, width: 30 },
      0
    ));

    expect(wrapper.text()).toContain('0');
  });

  it('Render 0 success when not specify the width', function () {
    var wrapper = (0, _enzyme.render)(_react2.default.createElement(
      _Text2.default,
      { x: 0, y: 0 },
      0
    ));

    expect(wrapper.text()).toContain('0');
  });

  it('Render text when x or y is a percentage', function () {
    var wrapper = (0, _enzyme.render)(_react2.default.createElement(
      _Text2.default,
      { x: '50%', y: '50%' },
      'anything'
    ));

    expect(wrapper.text()).toContain('anything');
  });

  it("Don't Render text when x or y is NaN ", function () {
    var wrapperNan = (0, _enzyme.render)(_react2.default.createElement(
      _Text2.default,
      { x: NaN, y: 10 },
      'anything'
    ));

    expect(wrapperNan.text()).not.toContain('anything');
  });
});